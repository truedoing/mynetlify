<!doctype html>
<html>
  <head>
    <title>调用数据</title>
    <script src="https://unpkg.com/jquery@3.6.0/dist/jquery.min.js"></script>

  </head>
  <body>
    <h1>记录</h1>
    <ul id="logs"></ul>
    <script>
    $(document).ready(function() {
   
      saveData("20238888");
     
    });
    function getData(){
        $.get( 'http://localhost:8888/.netlify/functions/gameplayinfo?studentkey=20238888', function(data) {
            const logs = JSON.parse(data);
            logs.forEach(function(log) {
                $('#logs').append('<li>' + log.player_name + ': ' + log.score + '</li>');
            });
        } );
    }
    function saveData(student_no) {
        const newLog = {
            player_name: 'New Playerssssaa',
            score: 100,
            likenum:1,
            student_no: student_no,
            des:"测试数据"
        };
        $.post( 'http://localhost:8888/.netlify/functions/gameplayinfo', JSON.stringify(newLog), function(data) {
             getData();
        } );
    }
 
    </script>
  </body>
</html>